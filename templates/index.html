<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Salary Predictor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
</head>
<body>
    <div id="app">
        <h1>Salary Predictor</h1>
        <form @submit.prevent="submitForm" id="prediction-form">
            <label for="experience_level">Experience Level:</label>
            <select id="experience_level" v-model="form.experience_level">
                <option value="">Select Experience Level</option>
                <option value="SE">SE - Senior</option>
                <option value="MI">MI - Mid</option>
                <option value="EN">EN - Entry</option>
                <option value="EX">EX - Executive</option>
            </select>

            <label for="employment_type">Employment Type:</label>
            <select id="employment_type" v-model="form.employment_type">
                <option value="">Select Employment Type</option>
                <option value="FT">Full-Time</option>
                <option value="CT">Contract</option>
                <option value="FL">Freelance</option>
                <option value="PT">Part-Time</option>
            </select>

            <label for="job_title">Job Title:</label>
            <select id="job_title" v-model="form.job_title">
                <option value="">Select Job Title</option>
                <option value="Principal Data Scientist">Principal Data Scientist</option>
                <option value="ML Engineer">ML Engineer</option>
                <option value="Data Scientist">Data Scientist</option>
                <option value="Applied Scientist">Applied Scientist</option>
                <option value="Data Analyst">Data Analyst</option>
                <option value="Research Engineer">Research Engineer</option>
                <option value="Analytics Engineer">Analytics Engineer</option>
                <option value="Business Intelligence Engineer">Business Intelligence Engineer</option>
                <option value="Machine Learning Engineer">Machine Learning Engineer</option>
                <option value="Data Strategist">Data Strategist</option>
                <option value="Data Engineer">Data Engineer</option>
                <option value="Computer Vision Engineer">Computer Vision Engineer</option>
                <option value="Data Quality Analyst">Data Quality Analyst</option>
                <option value="Compliance Data Analyst">Compliance Data Analyst</option>
            </select>

            <label for="employee_residence">Employee Residence:</label>
            <select id="employee_residence" v-model="form.employee_residence">
                <option value="">Select Employee Residence</option>
                <option value="ES">Spain</option>
                <option value="US">United States</option>
                <!-- Adicione as opções restantes aqui -->
            </select>


            <button type="submit">Predict</button>
        </form>

        <div id="error-message" class="error-message">Por favor, preencha todos os campos obrigatórios!</div>

    </div>

    <script>
        new Vue({
            el: '#app',
            data: {
                form: {
                    experience_level: '',
                    employment_type: '',
                    job_title: '',
                    employee_residence: '',
                    remote_ratio: 0
                }
            },
            methods: {
                submitForm() {
                    if (this.validateForm()) {
                        axios.post('/predict', this.form)
                            .then(response => {
                                console.log(response.data);  
                                window.location.href = '/result?predicted_salary=' + response.data;
                            })
                            .catch(error => {
                                console.error(error);
                            });
                    } else {
                        document.getElementById('error-message').style.display = 'block';
                    }
                },
                validateForm() {
                    return this.form.experience_level !== '' &&
                           this.form.employment_type !== '' &&
                           this.form.job_title !== '' &&
                           this.form.employee_residence !== '' &&
                           this.form.remote_ratio !== '';
                }
            }
        });
    </script>
</body>
</html>
